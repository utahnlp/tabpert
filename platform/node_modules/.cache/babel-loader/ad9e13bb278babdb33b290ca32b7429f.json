{"ast":null,"code":"var _jsxFileName = \"/home/nupur/infotabs-extension/infotabs-code/interface/frontend/src/components/Tables.js\";\nimport React, { Component } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\nimport View from \"./View\";\n\nconst axios = require(\"axios\");\n\nconst bgcolors_dict = {\n  main: \"#0C79FA\",\n  A: \"#0C79FA\",\n  B: \"#0C79FA\",\n  C: \"#0C79FA\"\n};\n\nclass Tables extends Component {\n  constructor(props) {\n    super(props);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLabelChange = this.handleLabelChange.bind(this);\n    this.handleRowChange = this.handleRowChange.bind(this);\n    this.handleStrategyChange = this.handleStrategyChange.bind(this);\n    this.handleHypothesisChange = this.handleHypothesisChange.bind(this);\n    this.addSection = this.addSection.bind(this);\n    this.deleteSection = this.deleteSection.bind(this);\n    this.editSectionName = this.editSectionName.bind(this);\n    this.state = {\n      title: \"\",\n      original: \"\",\n      A: \"\",\n      B: \"\",\n      C: \"\",\n      view: \"drag\",\n      oh: \"\",\n      ah: \"\",\n      bh: \"\",\n      ch: \"\",\n      cats: \"\",\n      id: \"\" // A_strategies: \"\",\n      // A_rows: \"\",\n      // B_strategies: \"\",\n      // B_rows: \"\",\n      // C_strategies: \"\",\n      // C_rows: \"\",\n\n    };\n  }\n\n  componentDidMount() {\n    this.getTables();\n  }\n\n  handleChange(e, id) {\n    var table = id.split(\"_\")[1];\n    var key = id.split(\"_\")[2];\n    var index = id.split(\"_\")[3];\n    const newState = JSON.parse(JSON.stringify(this.state));\n    const old_dict = newState[table][key][index];\n    const [old_meta] = Object.values(old_dict);\n    const new_meta = this.setCharAt(old_meta, 5, \"1\");\n    const new_dict = {};\n    new_dict[e.target.value] = new_meta; // console.log(new_dict);\n\n    newState[table][key][index] = new_dict;\n    this.setState(newState);\n  }\n\n  handleHypothesisChange(e, type) {\n    // console.log(e);\n    // console.log(e.target);\n    const new_hyp = document.querySelector('[id=\"' + e.target.id + '\"]').value; // console.log(new_hyp);\n    // console.log(e.target.outerHTML);\n\n    const old_hypo = e.target.outerHTML.match(/<.*>(.*)<.*>/)[1]; // console.log(old_hypo);\n\n    const state_name = type.toLowerCase() + \"h\";\n    let newState = this.state;\n    const meta = newState[state_name][old_hypo];\n    newState[state_name][new_hyp] = meta; // console.log(newState[state_name][old_hypo]);\n\n    delete newState[state_name][old_hypo];\n    this.setState(newState); // console.log(newState);\n  }\n\n  addSection(type, key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    newState[type][key] = [{\n      \"add new text\": \"0000011\"\n    }];\n    this.setState(newState);\n    return Object.keys(newState[type]).length - 1;\n  }\n\n  deleteSection(type, key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    delete newState[type][key];\n    this.setState(newState);\n  }\n\n  editSectionName(type, old_key, new_key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    const old_key_dict = newState[type][old_key];\n    const old_keys = Object.keys(newState[type]);\n    const replacedState = old_keys.reduce((acc, val) => {\n      if (val === old_key) {\n        acc[new_key] = old_key_dict;\n      } else {\n        acc[val] = newState[type][val];\n      }\n\n      return acc;\n    }, {});\n    newState[type] = replacedState;\n    this.setState(newState);\n  }\n\n  getTables() {\n    console.log(this.props);\n    const table_id = this.props.match.params.id;\n    console.log(\"table_id is **************\" + table_id);\n    fetch(`/api/table/?id=${table_id}`).then(res => res.json()).then(data => {\n      this.setState({\n        title: data.title,\n        original: data.original,\n        A: data.A,\n        B: data.B,\n        C: data.C,\n        oh: data.oh,\n        ah: data.ah,\n        bh: data.bh,\n        ch: data.ch,\n        id: table_id\n      });\n      console.log(this.state);\n    });\n    fetch(`/api/cats`).then(res => res.json()).then(data => {\n      console.log(this.state);\n      this.setState({\n        cats: data\n      });\n    });\n  }\n\n  submit() {\n    console.log(this.state);\n    var title = this.state.title;\n    var A = this.state.A;\n    var B = this.state.B;\n    var C = this.state.C;\n    A[\"title\"] = title;\n    B[\"title\"] = title;\n    C[\"title\"] = title;\n    var id = this.state.id;\n    var ah = this.state.ah;\n    var bh = this.state.bh;\n    var ch = this.state.ch;\n    axios.post(`/api/save`, {\n      title: title,\n      A: A,\n      B: B,\n      C: C,\n      id: id,\n      ah: ah,\n      bh: bh,\n      ch: ch\n    }).then(function (response) {\n      console.log(response);\n    }).catch(function (error) {//console.log(error);\n    });\n  } // helper function to change character at index of a string to chr\n\n\n  setCharAt(str, index, chr) {\n    if (index > str.length - 1) return str;\n    return str.substring(0, index) + chr + str.substring(index + 1);\n  }\n\n  reorder(list, startIndex, endIndex) {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n  }\n\n  move(source, destination, droppableSource, droppableDestination) {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n\n    for (var key in removed) removed[key] = this.setCharAt(removed[key], 4, 1);\n\n    destClone.splice(droppableDestination.index, 0, removed);\n    const result = {};\n    result[droppableSource.droppableId] = sourceClone;\n    result[droppableDestination.droppableId] = destClone;\n    console.log(\"removed is\");\n    console.log(removed);\n    return result;\n  }\n\n  copy(source, destination, droppableSource, droppableDestination) {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n    var newDict = {};\n    newDict[removed] = \"0000100\";\n    destClone.splice(droppableDestination.index, 0, newDict);\n    return destClone;\n  }\n\n  remove(source, droppableSource) {\n    const sourceClone = Array.from(source);\n    sourceClone.splice(droppableSource.index, 1);\n    return sourceClone;\n  }\n\n  add(destination, droppableDestination) {\n    console.log(document.getElementById(\"NEW\").value);\n    const text = document.getElementById(\"NEW\").value;\n    var new_dict = {};\n    new_dict[text] = \"0000011\";\n    const destClone = Array.from(destination);\n    destClone.splice(droppableDestination.index, 0, new_dict);\n    console.log(new_dict);\n    return destClone;\n  }\n\n  onDragEnd(result) {\n    const {\n      source,\n      destination\n    } = result; // dropped outside the list\n\n    if (!destination) {\n      return;\n    } // droppableIds are of the form <table_name>_<key> | trash | add\n\n\n    const sInd = source.droppableId;\n    const dInd = destination.droppableId;\n    console.log(\"sInd \" + sInd);\n    console.log(\"dInd \" + dInd);\n    console.log(JSON.parse(JSON.stringify(this.state))); // dropped in original table or the add card space\n\n    if (dInd === \"add\" || dInd.split(\"_\")[0] === \"original\") {\n      return;\n    } // if put into trash, delete\n    else if (dInd === \"trash\") {\n        const newSource = this.remove(this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]], source);\n        const newState = JSON.parse(JSON.stringify(this.state));\n        newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = newSource;\n        this.setState(newState);\n      } // if pulled from add space, add new card\n      else if (sInd == \"add\") {\n          console.log(\"we are in\");\n          const newDestination = this.add(this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]], destination);\n          const newState = JSON.parse(JSON.stringify(this.state));\n          newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = newDestination;\n          console.log(newState);\n          this.setState(newState);\n        } // if not the same key-category and not the same field name, drop is not allowed\n        else if (sInd.split(\"_\")[1] !== dInd.split(\"_\")[1] && this.state.cats[sInd.split(\"_\")[1]] !== this.state.cats[dInd.split(\"_\")[1]]) {\n            return;\n          } // if pulled from original table, copy\n          else if (sInd.split(\"_\")[0] === \"original\") {\n              const newDestination = this.copy(this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]], this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]], source, destination);\n              const newState = JSON.parse(JSON.stringify(this.state));\n              newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = newDestination;\n              this.setState(newState);\n              console.log(newState);\n            } // if dropped in the same place, we reorder the items\n            else if (sInd === dInd) {\n                const items = this.reorder(this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]], source.index, destination.index);\n                const newState = JSON.parse(JSON.stringify(this.state));\n                newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = items;\n                this.setState(newState);\n              } // if dropped in a different place, move\n              else {\n                  const result = this.move(this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]], this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]], source, destination);\n                  const newState = JSON.parse(JSON.stringify(this.state));\n                  newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = result[sInd];\n                  newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = result[dInd];\n                  this.setState(newState);\n                }\n  }\n\n  handleLabelChange(e, type, idx) {\n    console.log(\"event*********\");\n    console.log(e.target.value);\n    const new_label = e.target.value;\n    const state_name = type.toLowerCase() + \"h\";\n    const hypothesis = document.getElementById(\"hypothesis_\" + type + idx).value;\n    const newState = JSON.parse(JSON.stringify(this.state));\n    newState[state_name][hypothesis][0] = new_label;\n    this.setState(newState);\n    console.log(newState[state_name]);\n  }\n\n  handleRowChange(type, key, hypo) {\n    var newState = this.state;\n    var keys = newState[type.toLowerCase() + \"h\"][hypo][2];\n\n    if (keys.includes(key)) {\n      const idx = keys.indexOf(key);\n\n      if (idx > -1) {\n        keys.splice(idx, 1);\n      }\n    } else {\n      keys.push(key);\n    }\n\n    newState[type.toLowerCase() + \"h\"][hypo][2] = keys;\n    this.setState(newState);\n    console.log(newState);\n  }\n\n  handleStrategyChange(type, hypo, strat_index) {\n    const newState = this.state;\n    console.log(\"******&&&&&&&&&&&&&&&***********&&&&&&&&&\");\n    var strategies = newState[type.toLowerCase() + \"h\"][hypo][1];\n    const curr_strategy = strategies.charAt(strat_index);\n    strategies = this.setCharAt(strategies, strat_index, curr_strategy === \"1\" ? \"0\" : \"1\");\n    console.log(strategies);\n    newState[type.toLowerCase() + \"h\"][hypo][1] = strategies;\n    this.setState(newState);\n    console.log(newState);\n  }\n\n  render() {\n    console.log(\"We have re-rendered:\");\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DragDropContext, {\n      onDragEnd: this.onDragEnd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"mr-1\",\n      style: {\n        backgroundColor: bgcolors_dict[\"main\"]\n      },\n      onClick: () => {\n        this.setState({\n          view: \"drag\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 17\n      }\n    }, \"Main View\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: bgcolors_dict[\"A\"]\n      },\n      className: \"mr-1\",\n      onClick: () => {\n        this.setState({\n          view: \"focusA\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 17\n      }\n    }, \"Table A\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: bgcolors_dict[\"B\"]\n      },\n      className: \"mr-1\",\n      onClick: () => this.setState({\n        view: \"focusB\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }\n    }, \"Table B\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: bgcolors_dict[\"C\"]\n      },\n      className: \"mr-1\",\n      onClick: () => this.setState({\n        view: \"focusC\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 17\n      }\n    }, \"Table C\"))), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"justify-content-center white-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }\n    }, this.state.title)))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(View, {\n      type: \"add\",\n      original: this.state.original,\n      A: this.state.A,\n      B: this.state.B,\n      C: this.state.C,\n      oh: this.state.oh,\n      ah: this.state.ah,\n      bh: this.state.bh,\n      ch: this.state.ch,\n      handleChange: this.handleChange,\n      handleLabelChange: this.handleLabelChange,\n      handleRowChange: this.handleRowChange,\n      handleStrategyChange: this.handleStrategyChange,\n      addSection: this.addSection,\n      deleteSection: this.deleteSection,\n      editSectionName: this.editSectionName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(View, {\n      type: \"trash\",\n      original: this.state.original,\n      A: this.state.A,\n      B: this.state.B,\n      C: this.state.C,\n      oh: this.state.oh,\n      ah: this.state.ah,\n      bh: this.state.bh,\n      ch: this.state.ch,\n      handleChange: this.handleChange,\n      handleLabelChange: this.handleLabelChange,\n      handleRowChange: this.handleRowChange,\n      handleStrategyChange: this.handleStrategyChange,\n      addSection: this.addSection,\n      deleteSection: this.deleteSection,\n      editSectionName: this.editSectionName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      show: this.state.view === \"drag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(View, {\n      type: this.state.view,\n      original: this.state.original,\n      A: this.state.A,\n      B: this.state.B,\n      C: this.state.C,\n      oh: this.state.oh,\n      ah: this.state.ah,\n      bh: this.state.bh,\n      ch: this.state.ch,\n      handleChange: this.handleChange,\n      handleLabelChange: this.handleLabelChange,\n      handleRowChange: this.handleRowChange,\n      handleStrategyChange: this.handleStrategyChange,\n      handleHypothesisChange: this.handleHypothesisChange,\n      addSection: this.addSection,\n      deleteSection: this.deleteSection,\n      editSectionName: this.editSectionName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-right mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Button, {\n      className: \"align-right\",\n      onClick: this.submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Tables;","map":{"version":3,"sources":["/home/nupur/infotabs-extension/infotabs-code/interface/frontend/src/components/Tables.js"],"names":["React","Component","DragDropContext","Container","Row","Col","Button","View","axios","require","bgcolors_dict","main","A","B","C","Tables","constructor","props","onDragEnd","bind","submit","handleChange","handleLabelChange","handleRowChange","handleStrategyChange","handleHypothesisChange","addSection","deleteSection","editSectionName","state","title","original","view","oh","ah","bh","ch","cats","id","componentDidMount","getTables","e","table","split","key","index","newState","JSON","parse","stringify","old_dict","old_meta","Object","values","new_meta","setCharAt","new_dict","target","value","setState","type","new_hyp","document","querySelector","old_hypo","outerHTML","match","state_name","toLowerCase","meta","keys","length","old_key","new_key","old_key_dict","old_keys","replacedState","reduce","acc","val","console","log","table_id","params","fetch","then","res","json","data","post","response","catch","error","str","chr","substring","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","move","source","destination","droppableSource","droppableDestination","sourceClone","destClone","droppableId","copy","newDict","remove","add","getElementById","text","sInd","dInd","newSource","newDestination","items","idx","new_label","hypothesis","hypo","includes","indexOf","push","strat_index","strategies","curr_strategy","charAt","render","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\nimport View from \"./View\";\n\nconst axios = require(\"axios\");\n\nconst bgcolors_dict = {\n  main: \"#0C79FA\",\n  A: \"#0C79FA\",\n  B: \"#0C79FA\",\n  C: \"#0C79FA\",\n};\n\nclass Tables extends Component {\n  constructor(props) {\n    super(props);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLabelChange = this.handleLabelChange.bind(this);\n    this.handleRowChange = this.handleRowChange.bind(this);\n    this.handleStrategyChange = this.handleStrategyChange.bind(this);\n    this.handleHypothesisChange = this.handleHypothesisChange.bind(this);\n    this.addSection = this.addSection.bind(this);\n    this.deleteSection = this.deleteSection.bind(this);\n    this.editSectionName = this.editSectionName.bind(this);\n    this.state = {\n      title: \"\",\n      original: \"\",\n      A: \"\",\n      B: \"\",\n      C: \"\",\n      view: \"drag\",\n      oh: \"\",\n      ah: \"\",\n      bh: \"\",\n      ch: \"\",\n      cats: \"\",\n      id: \"\",\n      // A_strategies: \"\",\n      // A_rows: \"\",\n      // B_strategies: \"\",\n      // B_rows: \"\",\n      // C_strategies: \"\",\n      // C_rows: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getTables();\n  }\n\n  handleChange(e, id) {\n    var table = id.split(\"_\")[1];\n    var key = id.split(\"_\")[2];\n    var index = id.split(\"_\")[3];\n    const newState = JSON.parse(JSON.stringify(this.state));\n    const old_dict = newState[table][key][index];\n    const [old_meta] = Object.values(old_dict);\n    const new_meta = this.setCharAt(old_meta, 5, \"1\");\n    const new_dict = {};\n    new_dict[e.target.value] = new_meta;\n    // console.log(new_dict);\n    newState[table][key][index] = new_dict;\n    this.setState(newState);\n  }\n\n  handleHypothesisChange(e, type) {\n    // console.log(e);\n    // console.log(e.target);\n    const new_hyp = document.querySelector('[id=\"' + e.target.id + '\"]').value;\n    // console.log(new_hyp);\n    // console.log(e.target.outerHTML);\n    const old_hypo = e.target.outerHTML.match(/<.*>(.*)<.*>/)[1];\n    // console.log(old_hypo);\n    const state_name = type.toLowerCase() + \"h\";\n    let newState = this.state;\n    const meta = newState[state_name][old_hypo];\n    newState[state_name][new_hyp] = meta;\n    // console.log(newState[state_name][old_hypo]);\n    delete newState[state_name][old_hypo];\n    this.setState(newState);\n    // console.log(newState);\n  }\n\n  addSection(type, key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    newState[type][key] = [{ \"add new text\": \"0000011\" }];\n    this.setState(newState);\n    return Object.keys(newState[type]).length - 1;\n  }\n\n  deleteSection(type, key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    delete newState[type][key];\n    this.setState(newState);\n  }\n\n  editSectionName(type, old_key, new_key) {\n    const newState = JSON.parse(JSON.stringify(this.state));\n    const old_key_dict = newState[type][old_key];\n    const old_keys = Object.keys(newState[type]);\n    const replacedState = old_keys.reduce((acc, val) => {\n      if (val === old_key) {\n        acc[new_key] = old_key_dict;\n      } else {\n        acc[val] = newState[type][val];\n      }\n      return acc;\n    }, {});\n    newState[type] = replacedState;\n    this.setState(newState);\n  }\n\n  getTables() {\n    console.log(this.props);\n    const table_id = this.props.match.params.id;\n    console.log(\"table_id is **************\" + table_id);\n    fetch(`/api/table/?id=${table_id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState({\n          title: data.title,\n          original: data.original,\n          A: data.A,\n          B: data.B,\n          C: data.C,\n          oh: data.oh,\n          ah: data.ah,\n          bh: data.bh,\n          ch: data.ch,\n          id: table_id,\n        });\n        console.log(this.state);\n      });\n    fetch(`/api/cats`)\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(this.state);\n        this.setState({\n          cats: data,\n        });\n      });\n  }\n\n  submit() {\n    console.log(this.state);\n    var title = this.state.title;\n    var A = this.state.A;\n    var B = this.state.B;\n    var C = this.state.C;\n    A[\"title\"] = title;\n    B[\"title\"] = title;\n    C[\"title\"] = title;\n    var id = this.state.id;\n    var ah = this.state.ah;\n    var bh = this.state.bh;\n    var ch = this.state.ch;\n    axios\n      .post(`/api/save`, {\n        title: title,\n        A: A,\n        B: B,\n        C: C,\n        id: id,\n        ah: ah,\n        bh: bh,\n        ch: ch,\n      })\n      .then(function (response) {\n        console.log(response);\n      })\n      .catch(function (error) {\n        //console.log(error);\n      });\n  }\n\n  // helper function to change character at index of a string to chr\n  setCharAt(str, index, chr) {\n    if (index > str.length - 1) return str;\n    return str.substring(0, index) + chr + str.substring(index + 1);\n  }\n\n  reorder(list, startIndex, endIndex) {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n  }\n\n  move(source, destination, droppableSource, droppableDestination) {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n    for (var key in removed) removed[key] = this.setCharAt(removed[key], 4, 1);\n\n    destClone.splice(droppableDestination.index, 0, removed);\n\n    const result = {};\n    result[droppableSource.droppableId] = sourceClone;\n    result[droppableDestination.droppableId] = destClone;\n    console.log(\"removed is\");\n    console.log(removed);\n    return result;\n  }\n  copy(source, destination, droppableSource, droppableDestination) {\n    const sourceClone = Array.from(source);\n    const destClone = Array.from(destination);\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\n    var newDict = {};\n    newDict[removed] = \"0000100\";\n    destClone.splice(droppableDestination.index, 0, newDict);\n    return destClone;\n  }\n\n  remove(source, droppableSource) {\n    const sourceClone = Array.from(source);\n    sourceClone.splice(droppableSource.index, 1);\n    return sourceClone;\n  }\n  add(destination, droppableDestination) {\n    console.log(document.getElementById(\"NEW\").value);\n    const text = document.getElementById(\"NEW\").value;\n    var new_dict = {};\n    new_dict[text] = \"0000011\";\n    const destClone = Array.from(destination);\n    destClone.splice(droppableDestination.index, 0, new_dict);\n    console.log(new_dict);\n    return destClone;\n  }\n\n  onDragEnd(result) {\n    const { source, destination } = result;\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n    // droppableIds are of the form <table_name>_<key> | trash | add\n    const sInd = source.droppableId;\n    const dInd = destination.droppableId;\n    console.log(\"sInd \" + sInd);\n    console.log(\"dInd \" + dInd);\n    console.log(JSON.parse(JSON.stringify(this.state)));\n    // dropped in original table or the add card space\n    if (dInd === \"add\" || dInd.split(\"_\")[0] === \"original\") {\n      return;\n    }\n    // if put into trash, delete\n    else if (dInd === \"trash\") {\n      const newSource = this.remove(\n        this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]],\n        source\n      );\n      const newState = JSON.parse(JSON.stringify(this.state));\n      newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = newSource;\n      this.setState(newState);\n    }\n    // if pulled from add space, add new card\n    else if (sInd == \"add\") {\n      console.log(\"we are in\");\n      const newDestination = this.add(\n        this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]],\n        destination\n      );\n      const newState = JSON.parse(JSON.stringify(this.state));\n      newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = newDestination;\n      console.log(newState);\n      this.setState(newState);\n    }\n    // if not the same key-category and not the same field name, drop is not allowed\n    else if (\n      sInd.split(\"_\")[1] !== dInd.split(\"_\")[1] &&\n      this.state.cats[sInd.split(\"_\")[1]] !==\n        this.state.cats[dInd.split(\"_\")[1]]\n    ) {\n      return;\n    }\n    // if pulled from original table, copy\n    else if (sInd.split(\"_\")[0] === \"original\") {\n      const newDestination = this.copy(\n        this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]],\n        this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]],\n        source,\n        destination\n      );\n      const newState = JSON.parse(JSON.stringify(this.state));\n      newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = newDestination;\n      this.setState(newState);\n      console.log(newState);\n    }\n    // if dropped in the same place, we reorder the items\n    else if (sInd === dInd) {\n      const items = this.reorder(\n        this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]],\n        source.index,\n        destination.index\n      );\n      const newState = JSON.parse(JSON.stringify(this.state));\n      newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = items;\n      this.setState(newState);\n    }\n    // if dropped in a different place, move\n    else {\n      const result = this.move(\n        this.state[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]],\n        this.state[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]],\n        source,\n        destination\n      );\n      const newState = JSON.parse(JSON.stringify(this.state));\n      newState[sInd.split(\"_\")[0]][sInd.split(\"_\")[1]] = result[sInd];\n      newState[dInd.split(\"_\")[0]][dInd.split(\"_\")[1]] = result[dInd];\n\n      this.setState(newState);\n    }\n  }\n\n  handleLabelChange(e, type, idx) {\n    console.log(\"event*********\");\n    console.log(e.target.value);\n    const new_label = e.target.value;\n    const state_name = type.toLowerCase() + \"h\";\n    const hypothesis = document.getElementById(\n      \"hypothesis_\" + type + idx\n    ).value;\n    const newState = JSON.parse(JSON.stringify(this.state));\n    newState[state_name][hypothesis][0] = new_label;\n    this.setState(newState);\n    console.log(newState[state_name]);\n  }\n  handleRowChange(type, key, hypo) {\n    var newState = this.state;\n    var keys = newState[type.toLowerCase() + \"h\"][hypo][2];\n    if (keys.includes(key)) {\n      const idx = keys.indexOf(key);\n      if (idx > -1) {\n        keys.splice(idx, 1);\n      }\n    } else {\n      keys.push(key);\n    }\n    newState[type.toLowerCase() + \"h\"][hypo][2] = keys;\n    this.setState(newState);\n    console.log(newState);\n  }\n  handleStrategyChange(type, hypo, strat_index) {\n    const newState = this.state;\n    console.log(\"******&&&&&&&&&&&&&&&***********&&&&&&&&&\");\n    var strategies = newState[type.toLowerCase() + \"h\"][hypo][1];\n    const curr_strategy = strategies.charAt(strat_index);\n    strategies = this.setCharAt(\n      strategies,\n      strat_index,\n      curr_strategy === \"1\" ? \"0\" : \"1\"\n    );\n    console.log(strategies);\n    newState[type.toLowerCase() + \"h\"][hypo][1] = strategies;\n    this.setState(newState);\n    console.log(newState);\n  }\n  render() {\n    console.log(\"We have re-rendered:\");\n    return (\n      <Container>\n        <DragDropContext onDragEnd={this.onDragEnd}>\n          <Row>\n            <Col className=\"md-4\">\n              <div className=\"float-left\">\n                <Button\n                  className=\"mr-1\"\n                  style={{ backgroundColor: bgcolors_dict[\"main\"] }}\n                  onClick={() => {\n                    this.setState({ view: \"drag\" });\n                  }}\n                >\n                  Main View\n                </Button>\n                <Button\n                  style={{ backgroundColor: bgcolors_dict[\"A\"] }}\n                  className=\"mr-1\"\n                  onClick={() => {\n                    this.setState({ view: \"focusA\" });\n                  }}\n                >\n                  Table A\n                </Button>\n                <Button\n                  style={{ backgroundColor: bgcolors_dict[\"B\"] }}\n                  className=\"mr-1\"\n                  onClick={() => this.setState({ view: \"focusB\" })}\n                >\n                  Table B\n                </Button>\n                <Button\n                  style={{ backgroundColor: bgcolors_dict[\"C\"] }}\n                  className=\"mr-1\"\n                  onClick={() => this.setState({ view: \"focusC\" })}\n                >\n                  Table C\n                </Button>\n              </div>\n            </Col>\n            <Col>\n              <div className=\"justify-content-center white-text\">\n                <h2>{this.state.title}</h2>\n              </div>\n            </Col>\n          </Row>\n          <Row>\n            <View\n              type={\"add\"}\n              original={this.state.original}\n              A={this.state.A}\n              B={this.state.B}\n              C={this.state.C}\n              oh={this.state.oh}\n              ah={this.state.ah}\n              bh={this.state.bh}\n              ch={this.state.ch}\n              handleChange={this.handleChange}\n              handleLabelChange={this.handleLabelChange}\n              handleRowChange={this.handleRowChange}\n              handleStrategyChange={this.handleStrategyChange}\n              addSection={this.addSection}\n              deleteSection={this.deleteSection}\n              editSectionName={this.editSectionName}\n            />\n            <View\n              type={\"trash\"}\n              original={this.state.original}\n              A={this.state.A}\n              B={this.state.B}\n              C={this.state.C}\n              oh={this.state.oh}\n              ah={this.state.ah}\n              bh={this.state.bh}\n              ch={this.state.ch}\n              handleChange={this.handleChange}\n              handleLabelChange={this.handleLabelChange}\n              handleRowChange={this.handleRowChange}\n              handleStrategyChange={this.handleStrategyChange}\n              addSection={this.addSection}\n              deleteSection={this.deleteSection}\n              editSectionName={this.editSectionName}\n            />\n          </Row>\n          <Row show={this.state.view === \"drag\"}>\n            <View\n              type={this.state.view}\n              original={this.state.original}\n              A={this.state.A}\n              B={this.state.B}\n              C={this.state.C}\n              oh={this.state.oh}\n              ah={this.state.ah}\n              bh={this.state.bh}\n              ch={this.state.ch}\n              handleChange={this.handleChange}\n              handleLabelChange={this.handleLabelChange}\n              handleRowChange={this.handleRowChange}\n              handleStrategyChange={this.handleStrategyChange}\n              handleHypothesisChange={this.handleHypothesisChange}\n              addSection={this.addSection}\n              deleteSection={this.deleteSection}\n              editSectionName={this.editSectionName}\n            />\n          </Row>\n        </DragDropContext>\n        <Row className=\"justify-content-right mt-3\">\n          {\" \"}\n          <Button className=\"align-right\" onClick={this.submit}>\n            Submit\n          </Button>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default Tables;\n"]},"metadata":{},"sourceType":"module"}